### [設計] - [Container Apps応答監視アラート技術設計] - [2025-07-30T10:30:00]

**目的**: Container Apps応答監視アラート機能の詳細な技術設計を作成する

**コンテキスト**: 
- 高信頼度（95%）のため標準実装アプローチを採用
- 既存のBicepモジュール構造に統合
- アクショングループは定義しない

**決定**: Bicepモジュールベースの実装アプローチ

**実行**: 

1. **新規Bicepモジュール作成**:
   - ファイル: `infra/modules/alert-rules.bicep`
   - 2つのメトリクスアラートルールを定義
   - Container Appリソースを参照

2. **アラートルール設計**:
   - **5xxエラーアラート**:
     - メトリクス: Requests
     - ディメンション: StatusCodeCategory = '5xx'
     - 閾値: 5分間で5回以上
     - 集計: Count
   - **応答時間アラート**:
     - メトリクス: ResponseTime
     - 閾値: 平均5000ms以上
     - 集計: Average

3. **main.bicep統合**:
   - alert-rulesモジュールを追加
   - containerAppモジュールへの依存関係
   - アラートIDを出力として追加

**出力**: 技術設計文書を更新、実装計画を策定

**検証**: 
- Container Appsのメトリクス仕様を確認
- Bicepモジュール構文の妥当性を確認
- 既存モジュールとの整合性を確認

**次**: 実装タスクの作成と実行